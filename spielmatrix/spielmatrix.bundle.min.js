!function e(t,n,o){function i(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require
if(!s&&u)return u(a,!0)
if(r)return r(a,!0)
var d=new Error("Cannot find module '"+a+"'")
throw d.code="MODULE_NOT_FOUND",d}var l=n[a]={exports:{}}
t[a][0].call(l.exports,function(e){var n=t[a][1][e]
return i(n?n:e)},l,l.exports,e,t,n,o)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<o.length;a++)i(o[a])
return i}({1:[function(e,t,n){!function(e){e(Spielmatrix)}(function(e){"use strict"
e.assets={initialize:function(t){e.assets.initializeAsset(e.assets.petscii)},initializeAsset:function(e){e.texture=PIXI.BaseTexture.fromImage(e.url,!1,PIXI.SCALE_MODES.NEAREST)
for(var t=8,n=8,o=128,i=128,r=Math.floor(o/t),a=Math.floor(i/n),s=0;a>s;++s)for(var u=0;r>u;++u){var d=new PIXI.Texture(e.texture,new PIXI.Rectangle(u*t,s*t,t,t))
e.glyphs.push(d)}},petscii:{texture:null,glyphs:[],tileSize:8,w:16,h:16,url:"data:image/png;base64,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",EMPTY:0,FILLED:255}},e.modules.push(e.assets)})},{}],2:[function(e,t,n){!function(e){e(Spielmatrix)}(function(e){"use strict"
e.audio={initialize:function(e){if("object"==typeof e.options.preloadSounds)for(var t=0,n=e.options.preloadSounds.length;n>t;++t){var o=e.options.preloadSounds[t]
"string"==typeof o&&(this.sounds[o]=new Howl({src:this.getUrls(e,o)}))}},play:function(e,t){var n=this.sounds[t]
n?n.play():(n=new Howl({src:this.getUrls(e,t)}),this.sounds[t]=n,n.play())},getUrls:function(e,t){for(var n=[],o=0,i=this.formats.length;i>o;++o)n.push([e.options.audioPath,t,".",this.formats[o]].join(""))
return n},formats:["ogg","mp3"],soundNames:["Appear","Blip1","Blip2","Blip3","Blip4","Coin1","Coin2","Coin3","Explosion1","Explosion2","Explosion3","Export","Hit1","Hit2","Jump1","Jump2","Laser1","Laser2","Laser3","Modem","Powerup1","Powerup2","Powerup3","UhOh1","UhOh2","UhOh3","Yarp"],sounds:{}},e.modules.push(e.audio)})},{}],3:[function(e,t,n){!function(){"use strict"
function e(){try{"undefined"!=typeof AudioContext?t=new AudioContext:"undefined"!=typeof webkitAudioContext?t=new webkitAudioContext:o=!1}catch(e){o=!1}if(!o)if("undefined"!=typeof Audio)try{new Audio}catch(e){i=!0}else i=!0}var t=null,o=!0,i=!1
if(e(),o){var r="undefined"==typeof t.createGain?t.createGainNode():t.createGain()
r.gain.value=1,r.connect(t.destination)}var a=function(){this.init()}
a.prototype={init:function(){var e=this||s
return e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e.iOSAutoEnable=!0,e.noAudio=i,e.usingWebAudio=o,e.ctx=t,i||e._setupCodecs(),e},volume:function(e){var t=this||s
if(e=parseFloat(e),"undefined"!=typeof e&&e>=0&&1>=e){t._volume=e,o&&(r.gain.value=e)
for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var i=t._howls[n]._getSoundIds(),a=0;a<i.length;a++){var u=t._howls[n]._soundById(i[a])
u&&u._node&&(u._node.volume=u._volume*e)}return t}return t._volume},mute:function(e){var t=this||s
t._muted=e,o&&(r.gain.value=e?0:t._volume)
for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var i=t._howls[n]._getSoundIds(),a=0;a<i.length;a++){var u=t._howls[n]._soundById(i[a])
u&&u._node&&(u._node.muted=e?!0:u._muted)}return t},codecs:function(e){return(this||s)._codecs[e]},_setupCodecs:function(){var e=this||s,t=new Audio,n=t.canPlayType("audio/mpeg;").replace(/^no$/,"")
return e._codecs={mp3:!(!n&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")},e},_enableiOSAudio:function(){var e=this||s
if(!t||!e._iOSEnabled&&/iPhone|iPad|iPod/i.test(navigator.userAgent)){e._iOSEnabled=!1
var n=function(){var o=t.createBuffer(1,1,22050),i=t.createBufferSource()
i.buffer=o,i.connect(t.destination),"undefined"==typeof i.start?i.noteOn(0):i.start(0),setTimeout(function(){(i.playbackState===i.PLAYING_STATE||i.playbackState===i.FINISHED_STATE)&&(e._iOSEnabled=!0,e.iOSAutoEnable=!1,window.removeEventListener("touchstart",n,!1))},0)}
return window.addEventListener("touchstart",n,!1),e}}}
var s=new a,u=function(e){var t=this
return e.src&&0!==e.src.length?void t.init(e):void console.error("An array of source files must be passed with any new Howl.")}
u.prototype={init:function(e){var n=this
return n._autoplay=e.autoplay||!1,n._ext=e.ext||null,n._html5=e.html5||!1,n._muted=e.mute||!1,n._loop=e.loop||!1,n._pool=e.pool||5,n._preload="boolean"==typeof e.preload?e.preload:!0,n._rate=e.rate||1,n._sprite=e.sprite||{},n._src="string"!=typeof e.src?e.src:[e.src],n._volume=void 0!==e.volume?e.volume:1,n._duration=0,n._loaded=!1,n._sounds=[],n._endTimers={},n._onend=e.onend?[{fn:e.onend}]:[],n._onfaded=e.onfaded?[{fn:e.onfaded}]:[],n._onload=e.onload?[{fn:e.onload}]:[],n._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],n._onpause=e.onpause?[{fn:e.onpause}]:[],n._onplay=e.onplay?[{fn:e.onplay}]:[],n._webAudio=o&&!n._html5,"undefined"!=typeof t&&t&&s.iOSAutoEnable&&s._enableiOSAudio(),s._howls.push(n),n._preload&&n.load(),n},load:function(){var e=this,t=null
if(i)return void e._emit("loaderror")
"string"==typeof e._src&&(e._src=[e._src])
for(var n=0;n<e._src.length;n++){var o,r
if(e._ext&&e._ext[n]?o=e._ext[n]:(r=e._src[n],o=/^data:audio\/([^;,]+);/i.exec(r),o||(o=/\.([^.]+)$/.exec(r.split("?",1)[0])),o&&(o=o[1].toLowerCase())),s.codecs(o)){t=e._src[n]
break}}return t?(e._src=t,new d(e),e._webAudio&&f(e),e):void e._emit("loaderror")},play:function(e){var n=this,o=arguments,i=null
if("number"==typeof e)i=e,e=null
else if("undefined"==typeof e){e="__default"
for(var r=0,a=0;a<n._sounds.length;a++)n._sounds[a]._paused&&!n._sounds[a]._ended&&(r++,i=n._sounds[a]._id)
1===r?e=null:i=null}var u=i?n._soundById(i):n._inactiveSound()
if(!u)return null
if(i&&!e&&(e=u._sprite||"__default"),!n._loaded&&!n._sprite[e])return n.once("load",function(){n.play(n._soundById(u._id)?u._id:void 0)}),u._id
if(i&&!u._paused)return u._id
var d=u._seek>0?u._seek:n._sprite[e][0]/1e3,l=(n._sprite[e][0]+n._sprite[e][1])/1e3-d,f=function(){var o=!(!u._loop&&!n._sprite[e][2])
n._emit("end",u._id),!n._webAudio&&o&&n.stop(u._id).play(u._id),n._webAudio&&o&&(n._emit("play",u._id),u._seek=u._start||0,u._playStart=t.currentTime,n._endTimers[u._id]=setTimeout(f,1e3*(u._stop-u._start)/Math.abs(n._rate))),n._webAudio&&!o&&(u._paused=!0,u._ended=!0,u._seek=u._start||0,n._clearTimer(u._id),u._node.bufferSource=null),n._webAudio||o||n.stop(u._id)}
n._endTimers[u._id]=setTimeout(f,1e3*l/Math.abs(n._rate)),u._paused=!1,u._ended=!1,u._sprite=e,u._seek=d,u._start=n._sprite[e][0]/1e3,u._stop=(n._sprite[e][0]+n._sprite[e][1])/1e3,u._loop=!(!u._loop&&!n._sprite[e][2])
var p=u._node
if(n._webAudio){var c=function(){n._refreshBuffer(u)
var e=u._muted||n._muted?0:u._volume*s.volume()
p.gain.setValueAtTime(e,t.currentTime),u._playStart=t.currentTime,"undefined"==typeof p.bufferSource.start?u._loop?p.bufferSource.noteGrainOn(0,d,86400):p.bufferSource.noteGrainOn(0,d,l):u._loop?p.bufferSource.start(0,d,86400):p.bufferSource.start(0,d,l),n._endTimers[u._id]||(n._endTimers[u._id]=setTimeout(f,1e3*l/Math.abs(n._rate))),o[1]||setTimeout(function(){n._emit("play",u._id)},0)}
n._loaded?c():(n.once("load",c),n._clearTimer(u._id))}else{var _=function(){p.currentTime=d,p.muted=u._muted||n._muted||s._muted||p.muted,p.volume=u._volume*s.volume(),p.playbackRate=n._rate,setTimeout(function(){p.play(),o[1]||n._emit("play",u._id)},0)}
if(4===p.readyState||!p.readyState&&navigator.isCocoonJS)_()
else{var h=function(){n._endTimers[u._id]=setTimeout(f,1e3*l/Math.abs(n._rate)),_(),p.removeEventListener("canplaythrough",h,!1)}
p.addEventListener("canplaythrough",h,!1),n._clearTimer(u._id)}}return u._id},pause:function(e){var t=this
if(!t._loaded)return t.once("play",function(){t.pause(e)}),t
for(var n=t._getSoundIds(e),o=0;o<n.length;o++){t._clearTimer(n[o])
var i=t._soundById(n[o])
if(i&&!i._paused){if(i._seek=t.seek(n[o]),i._paused=!0,t._webAudio){if(!i._node.bufferSource)return t
"undefined"==typeof i._node.bufferSource.stop?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),i._node.bufferSource=null}else isNaN(i._node.duration)||i._node.pause()
arguments[1]||t._emit("pause",i._id)}}return t},stop:function(e){var t=this
if(!t._loaded)return"undefined"!=typeof t._sounds[0]._sprite&&t.once("play",function(){t.stop(e)}),t
for(var n=t._getSoundIds(e),o=0;o<n.length;o++){t._clearTimer(n[o])
var i=t._soundById(n[o])
if(i&&!i._paused)if(i._seek=i._start||0,i._paused=!0,i._ended=!0,t._webAudio&&i._node){if(!i._node.bufferSource)return t
"undefined"==typeof i._node.bufferSource.stop?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),i._node.bufferSource=null}else i._node&&!isNaN(i._node.duration)&&(i._node.pause(),i._node.currentTime=i._start||0)}return t},mute:function(e,n){var o=this
if(!o._loaded)return o.once("play",function(){o.mute(e,n)}),o
if("undefined"==typeof n){if("boolean"!=typeof e)return o._muted
o._muted=e}for(var i=o._getSoundIds(n),r=0;r<i.length;r++){var a=o._soundById(i[r])
a&&(a._muted=e,o._webAudio&&a._node?a._node.gain.setValueAtTime(e?0:a._volume*s.volume(),t.currentTime):a._node&&(a._node.muted=s._muted?!0:e))}return o},volume:function(){var e,n,o=this,i=arguments
if(0===i.length)return o._volume
if(1===i.length){var r=o._getSoundIds(),a=r.indexOf(i[0])
a>=0?n=parseInt(i[0],10):e=parseFloat(i[0])}else 2===i.length&&(e=parseFloat(i[0]),n=parseInt(i[1],10))
var u
if(!("undefined"!=typeof e&&e>=0&&1>=e))return u=n?o._soundById(n):o._sounds[0],u?u._volume:0
if(!o._loaded)return o.once("play",function(){o.volume.apply(o,i)}),o
"undefined"==typeof n&&(o._volume=e),n=o._getSoundIds(n)
for(var d=0;d<n.length;d++)u=o._soundById(n[d]),u&&(u._volume=e,o._webAudio&&u._node?u._node.gain.setValueAtTime(e*s.volume(),t.currentTime):u._node&&(u._node.volume=e*s.volume()))
return o},fade:function(e,n,o,i){var r=this
if(!r._loaded)return r.once("play",function(){r.fade(e,n,o,i)}),r
r.volume(e,i)
for(var a=r._getSoundIds(i),s=0;s<a.length;s++){var u=r._soundById(a[s])
if(u)if(r._webAudio){var d=t.currentTime,l=d+o/1e3
u._volume=e,u._node.gain.setValueAtTime(e,d),u._node.gain.linearRampToValueAtTime(n,l),setTimeout(function(e,o){setTimeout(function(){o._volume=n,r._emit("faded",e)},l-t.currentTime>0?Math.ceil(1e3*(l-t.currentTime)):0)}.bind(r,a[s],u),o)}else{var f=Math.abs(e-n),p=e>n?"out":"in",c=f/.01,_=o/c
!function(){var t=e,o=setInterval(function(e){t+="in"===p?.01:-.01,t=Math.max(0,t),t=Math.min(1,t),t=Math.round(100*t)/100,r.volume(t,e),t===n&&(clearInterval(o),r._emit("faded",e))}.bind(r,a[s]),_)}()}}return r},loop:function(){var e,t,n,o=this,i=arguments
if(0===i.length)return o._loop
if(1===i.length){if("boolean"!=typeof i[0])return n=o._soundById(parseInt(i[0],10)),n?n._loop:!1
e=i[0],o._loop=e}else 2===i.length&&(e=i[0],t=parseInt(i[1],10))
for(var r=o._getSoundIds(t),a=0;a<r.length;a++)n=o._soundById(r[a]),n&&(n._loop=e,o._webAudio&&n._node&&(n._node.bufferSource.loop=e))
return o},seek:function(){var e,n,o=this,i=arguments
if(0===i.length)n=o._sounds[0]._id
else if(1===i.length){var r=o._getSoundIds(),a=r.indexOf(i[0])
a>=0?n=parseInt(i[0],10):(n=o._sounds[0]._id,e=parseFloat(i[0]))}else 2===i.length&&(e=parseFloat(i[0]),n=parseInt(i[1],10))
if("undefined"==typeof n)return o
if(!o._loaded)return o.once("load",function(){o.seek.apply(o,i)}),o
var s=o._soundById(n)
if(s){if(!(e>=0))return o._webAudio?s._seek+o.playing(n)?t.currentTime-s._playStart:0:s._node.currentTime
var u=o.playing(n)
u&&o.pause(n,!0),s._seek=e,o._clearTimer(n),u&&o.play(n,!0)}return o},playing:function(e){var t=this,n=t._soundById(e)||t._sounds[0]
return n?!n._paused:!1},duration:function(){return this._duration},unload:function(){for(var e=this,t=e._sounds,n=0;n<t.length;n++){t[n]._paused||(e.stop(t[n]._id),e._emit("end",t[n]._id)),e._webAudio||(t[n]._node.src="",t[n]._node.removeEventListener("error",t[n]._errorFn,!1),t[n]._node.removeEventListener("canplaythrough",t[n]._loadFn,!1)),delete t[n]._node,e._clearTimer(t[n]._id)
var o=s._howls.indexOf(e)
o>=0&&s._howls.splice(o,1)}return l&&delete l[e._src],e=null,null},on:function(e,t,n){var o=this,i=o["_on"+e]
return"function"==typeof t&&i.push({id:n,fn:t}),o},off:function(e,t,n){var o=this,i=o["_on"+e]
if(t){for(var r=0;r<i.length;r++)if(t===i[r].fn&&n===i[r].id){i.splice(r,1)
break}}else i=[]
return o},once:function(e,t,n){var o=this,i=function(){t.apply(o,arguments),o.off(e,i,n)}
return o.on(e,i,n),o},_emit:function(e,t,n){for(var o=this,i=o["_on"+e],r=0;r<i.length;r++)i[r].id&&i[r].id!==t||setTimeout(function(e){e.call(this,t,n)}.bind(o,i[r].fn),0)
return o},_clearTimer:function(e){var t=this
return t._endTimers[e]&&(clearTimeout(t._endTimers[e]),delete t._endTimers[e]),t},_soundById:function(e){for(var t=this,n=0;n<t._sounds.length;n++)if(e===t._sounds[n]._id)return t._sounds[n]
return null},_inactiveSound:function(){var e=this
e._drain()
for(var t=0;t<e._sounds.length;t++)if(e._sounds[t]._ended)return e._sounds[t].reset()
return new d(e)},_drain:function(){var e=this,t=e._pool,n=0,o=0
if(!(e._sounds.length<t)){for(o=0;o<e._sounds.length;o++)e._sounds[o]._ended&&n++
for(o=e._sounds.length-1;o>=0;o--){if(t>=n)return
e._sounds[o]._ended&&(e._webAudio&&e._sounds[o]._node&&e._sounds[o]._node.disconnect(0),e._sounds.splice(o,1),n--)}}},_getSoundIds:function(e){var t=this
if("undefined"==typeof e){for(var n=[],o=0;o<t._sounds.length;o++)n.push(t._sounds[o]._id)
return n}return[e]},_refreshBuffer:function(e){var n=this
return e._node.bufferSource=t.createBufferSource(),e._node.bufferSource.buffer=l[n._src],e._node.bufferSource.connect(e._panner?e._panner:e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop),e._node.bufferSource.playbackRate.value=n._rate,n}}
var d=function(e){this._parent=e,this.init()}
if(d.prototype={init:function(){var e=this,t=e._parent
return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._muted=t._muted,e._seek=0,e._paused=!0,e._ended=!0,e._id=Math.round(Date.now()*Math.random()),t._sounds.push(e),e.create(),e},create:function(){var e=this,n=e._parent,o=s._muted||e._muted||e._parent._muted?0:e._volume*s.volume()
return n._webAudio?(e._node="undefined"==typeof t.createGain?t.createGainNode():t.createGain(),e._node.gain.setValueAtTime(o,t.currentTime),e._node.paused=!0,e._node.connect(r)):(e._node=new Audio,e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener("canplaythrough",e._loadFn,!1),e._node.src=n._src,e._node.preload="auto",e._node.volume=o,e._node.load()),e},reset:function(){var e=this,t=e._parent
return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._muted=t._muted,e._seek=0,e._paused=!0,e._ended=!0,e._sprite=null,e._id=Math.round(Date.now()*Math.random()),e},_errorListener:function(){var e=this
e._node.error&&4===e._node.error.code&&(s.noAudio=!0),e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorListener,!1)},_loadListener:function(){var e=this,t=e._parent
t._duration=Math.ceil(10*e._node.duration)/10,0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),t._loaded||(t._loaded=!0,t._emit("load")),t._autoplay&&t.play(),e._node.removeEventListener("canplaythrough",e._loadFn,!1)}},o)var l={},f=function(e){var t=e._src
if(l[t])return e._duration=l[t].duration,void _(e)
if(/^data:[^;]+;base64,/.test(t)){window.atob=window.atob||function(e){for(var t,n,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i=String(e).replace(/=+$/,""),r=0,a=0,s="";n=i.charAt(a++);~n&&(t=r%4?64*t+n:n,r++%4)?s+=String.fromCharCode(255&t>>(-2*r&6)):0)n=o.indexOf(n)
return s}
for(var n=atob(t.split(",")[1]),o=new Uint8Array(n.length),i=0;i<n.length;++i)o[i]=n.charCodeAt(i)
c(o.buffer,e)}else{var r=new XMLHttpRequest
r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=function(){c(r.response,e)},r.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete l[t],e.load())},p(r)}},p=function(e){try{e.send()}catch(t){e.onerror()}},c=function(e,n){t.decodeAudioData(e,function(e){e&&(l[n._src]=e,_(n,e))},function(){n._emit("loaderror")})},_=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),e._loaded||(e._loaded=!0,e._emit("load")),e._autoplay&&e.play()}
"function"==typeof define&&define.amd&&define("howler",function(){return{Howler:s,Howl:u}}),"undefined"!=typeof n&&(n.Howler=s,n.Howl=u),"undefined"!=typeof window&&(window.HowlerGlobal=a,window.Howler=s,window.Howl=u,window.Sound=d)}()},{}],4:[function(e,t,n){!function(e){e(Spielmatrix)}(function(e){"use strict"
e.keyboard={initialize:function(t){for(var n in kd)kd.hasOwnProperty(n)&&kd[n]instanceof kd.Key&&(kd[n].press(e.keyboard.keyEvent.bind(null,t,!0,n)),kd[n].up(e.keyboard.keyEvent.bind(null,t,!1,n)))},keyEvent:function(e,t,n){t&&e.options.keydown&&e.options.keydown(n),!t&&e.options.keyup&&e.options.keyup(n)},isKeyDown:function(e){return kd.isDown(e)},isKeyUp:function(e){return!kd.isDown(e)},update:function(e,t){kd.tick()}},e.modules.push(e.keyboard)})},{}],5:[function(e,t,n){!function(e){var n=function(){var t={}
t.forEach=function(e,t){var n
for(n in e)e.hasOwnProperty(n)&&t(e[n],n)}
var n=t.forEach
t.getTranspose=function(e){var t={}
return n(e,function(e,n){t[e]=n}),t},t.indexOf=function(e,t){if(e.indexOf)return e.indexOf(t)
var n,o=e.length
for(n=0;o>n;n++)if(e[n]===t)return n
return-1}
var o=t.indexOf
return t.pushUnique=function(e,t){return-1===o(e,t)?(e.push(t),!0):!1},t.removeValue=function(e,t){var n=o(e,t)
return-1!==n?e.splice(n,1)[0]:void 0},t.documentOn=function(t,n){e.addEventListener?e.addEventListener(t,n,!1):document.attachEvent&&document.attachEvent("on"+t,n)},t.requestAnimationFrame=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||function(t){e.setTimeout(t,1e3/60)}}(),t.noop=function(){},t}(),o={A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,",":188,".":190,"/":191,";":186,"'":222,"[":219,"]":221,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,"-":189,"=":187,BACKSPACE:8,TAB:9,DEL:46,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,"NUMPAD_/":111,"NUMPAD_.":110,"NUMPAD_*":106,"NUMPAD_-":109,"NUMPAD_+":107,ENTER:13,SHIFT:16,CTRL:17,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,GRAVE:192,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36},i=n.getTranspose(o),r=[],a=function(){"use strict"
function e(e){this.keyCode=e}function t(e,t,n){n?e[t]=n:e[t]()}return e.prototype._downHandler=n.noop,e.prototype._upHandler=n.noop,e.prototype._pressHandler=n.noop,e.prototype.isDown=function(){return-1!==n.indexOf(r,this.keyCode)},e.prototype.down=function(e){t(this,"_downHandler",e)},e.prototype.up=function(e){t(this,"_upHandler",e)},e.prototype.press=function(e){t(this,"_pressHandler",e)},e.prototype.unbindDown=function(){this._downHandler=n.noop},e.prototype.unbindUp=function(){this._upHandler=n.noop},e.prototype.unbindPress=function(){this._pressHandler=n.noop},e}(),s=function(t){"use strict"
var r={}
r.Key=a
var s=!1
return r.tick=function(){var e,n=t.length
for(e=0;n>e;e++){var o=t[e],a=i[o]
a&&r[a].down()}},r.run=function(t){s=!0,n.requestAnimationFrame.call(e,function(){s&&(r.run(t),t())})},r.stop=function(){s=!1},n.forEach(o,function(e,t){r[t]=new a(e)}),n.documentOn("keydown",function(e){var o=e.keyCode,a=i[o],s=n.pushUnique(t,o)
s&&r[a]?r[a].press():r[a]||console.warn("Unhandled key: "+o)}),n.documentOn("keyup",function(e){var o=n.removeValue(t,e.keyCode),a=i[o]
a&&r[a].up()}),n.documentOn("blur",function(e){n.forEach(t,function(e){var t=i[e]
t&&r[t].up()}),t.length=0}),r}(r)
"object"==typeof t&&"object"==typeof t.exports?t.exports=s:"function"==typeof define&&define.amd?define(function(){return s}):e.kd=s}(window)},{}],6:[function(e,t,n){!function(e){e(Spielmatrix)}(function(e){"use strict"
e.mouse={initialize:function(t){t.state.pixiContainer.mouseover=e.mouse.onMouseOver.bind(null,t),t.state.pixiContainer.mouseout=e.mouse.onMouseOut.bind(null,t),t.state.pixiContainer.mousedown=e.mouse.onMouseDown.bind(null,t),t.state.pixiContainer.mouseup=e.mouse.onMouseUp.bind(null,t),t.state.pixiContainer.mousemove=e.mouse.onMouseMove.bind(null,t),t.state.pixiContainer.touchstart=e.mouse.onMouseDown.bind(null,t),t.state.pixiContainer.touchmove=e.mouse.onMouseMove.bind(null,t),t.state.pixiContainer.touchend=e.mouse.onMouseUp.bind(null,t)},setMouseState:function(e,t,n,o){e.state.cursor.x=t,e.state.cursor.y=n,e.state.cursor.onGrid=o},onMouseDown:function(e,t){var n=Math.floor(t.data.global.x/e.state.tileSize),o=Math.floor(t.data.global.y/e.state.tileSize)
e.options.mousedown&&e.options.mousedown(n,o)},onMouseUp:function(e,t){var n=Math.floor(t.data.global.x/e.state.tileSize),o=Math.floor(t.data.global.y/e.state.tileSize)
e.options.mouseup&&e.options.mouseup(n,o)},onMouseMove:function(t,n){var o=Math.floor(n.data.global.x/t.state.tileSize),i=Math.floor(n.data.global.y/t.state.tileSize),r=o>=0&&i>=0&&o<t.state.width&&i<t.state.height;(t.state.cursor.x!=o||t.state.cursor.y!=i||t.state.cursor.onGrid!=r)&&(r&&t.options.mousemove&&t.options.mousemove(t.state.cursor.x,t.state.cursor.y,o,i),t.state.cursor.onGrid&&t.options.mouseleave&&t.options.mouseleave(t.state.cursor.x,t.state.cursor.y),r&&t.options.mouseenter&&t.options.mouseenter(o,i),e.mouse.setMouseState(t,o,i,r))},onMouseOver:function(t,n){var o=Math.floor(n.data.global.x/t.state.tileSize),i=Math.floor(n.data.global.y/t.state.tileSize)
t.options.mouseover&&t.options.mouseover(o,i),e.mouse.setMouseState(t,o,i,!0)},onMouseOut:function(t,n){var o=Math.floor(n.data.global.x/t.state.tileSize),i=Math.floor(n.data.global.y/t.state.tileSize)
t.options.mouseout&&t.options.mouseout(t.state.cursor.x,t.state.cursor.y),t.options.mouseleave&&t.options.mouseleave(t.state.cursor.x,t.state.cursor.y),e.mouse.setMouseState(t,o,i,!1)}},e.modules.push(e.mouse)})},{}],7:[function(e,t,n){!function(e){e(Spielmatrix)}(function(e){"use strict"
e.rendering={initialize:function(t){e.rendering.initializeRenderer(t),e.rendering.initializeTiles(t)},initializeRenderer:function(t){e.rendering.readViewOptions(t),e.rendering.calculateViewSize(t)
var n={antialias:!t.options.pixelPerfect}
t.state.renderer=PIXI.autoDetectRenderer(t.state.renderWidth,t.state.renderHeight,n),t.state.pixiContainer=new PIXI.Container,t.state.pixiContainer.interactive=!0,t.options.place.appendChild(t.state.renderer.view)},readViewOptions:function(e){var t=e.options.place
if(t.attributes.hasOwnProperty("data-width-max")){var n=parseInt(t.attributes["data-width-max"].value)
isNaN(n)||(e.options.renderWidthMax=n)}if(t.attributes.hasOwnProperty("data-width-min")){var o=parseInt(t.attributes["data-width-min"].value)
isNaN(o)||(e.options.renderWidthMin=o)}t.attributes.hasOwnProperty("data-pixel-perfect")&&(e.options.pixelPerfect="true"===t.attributes["data-pixel-perfect"].value),t.attributes.hasOwnProperty("data-resize-canvas")&&(e.options.resizeCanvas="true"===t.attributes["data-resize-canvas"].value),e.state.renderWidth=e.options.renderWidthMax},calculateViewSize:function(t){if(t.options.pixelPerfect){var n=e.assets.petscii.tileSize
t.state.tileSize=Math.floor(t.state.renderWidth/t.state.width),t.state.tileSize=Math.max(n,t.state.tileSize-t.state.tileSize%n)}else t.state.tileSize=Math.floor(t.state.renderWidth/t.state.width)
t.state.renderWidth=t.state.width*t.state.tileSize,t.state.renderHeight=t.state.height*t.state.tileSize},update:function(t,n){if(t.options.resizeCanvas&&t.options.renderWidthMax!==t.options.renderWidthMin){var o=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,i=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,r=t.state.width/t.state.height,a=i*r
o>a&&(o=a)
var s=!1
o<t.state.renderWidth&&t.state.renderWidth>t.options.renderWidthMin&&(s=!0,t.state.renderWidth=Math.floor(Math.max(o,t.options.renderWidthMin))),o>t.state.renderWidth&&t.state.renderWidth<t.options.renderWidthMax&&(s=!0,t.state.renderWidth=Math.floor(Math.min(o,t.options.renderWidthMax))),s&&(t.state.renderHeight=Math.floor(t.state.height*(t.state.renderWidth/t.state.width)),e.rendering.calculateViewSize(t),t.state.pixiContainer.width=t.state.renderWidth,t.state.pixiContainer.height=t.state.renderHeight,t.state.renderer.resize(t.state.renderWidth,t.state.renderHeight))}},initializeTiles:function(t){t.state.squareTexture=e.assets.petscii.glyphs[e.assets.petscii.FILLED],t.state.glyphTexture=e.assets.petscii.glyphs[e.assets.petscii.EMPTY]
var n=new PIXI.Container,o=new PIXI.Container
t.state.pixiContainer.addChild(n),t.state.pixiContainer.addChild(o)
var i=e.assets.petscii.tileSize,r=t.state.tileSize/i
t.state.pixiContainer.scale.x=r,t.state.pixiContainer.scale.y=r
for(var a=t.state.width,s=t.state.height,u=t.options.defaultColor,d=0;s>d;++d)for(var l=0;a>l;++l){var f=new PIXI.Sprite(t.state.squareTexture),p=new PIXI.Sprite(t.state.glyphTexture)
n.addChild(f),o.addChild(p),t.state.tiles.push(new e.Tile(f,p,e.assets.petscii.glyphs,l,d,i,u))}},render:function(e){for(var t=e.state.tiles.length,n=0;t>n;++n)e.state.tiles[n].render()
e.state.renderer.render(e.state.pixiContainer)}},e.modules.push(e.rendering)})},{}],8:[function(e,t,n){!function(e){e(Spielmatrix)}(function(e){"use strict"
var t=function(e,t){for(var n=0;n<e.length;++n)t(e[n])},n=function(e,t){for(var n=[],o=0;o<e.length;++o){var i=e[o],r=!0
for(var a in t)if(t.hasOwnProperty(a)&&i[a]!==t[a]){r=!1
break}r&&n.push(i)}return n},o=function(e,t){for(var n=[],o=0;o<e.length;++o)t(e[o])===!0&&n.push(e[o])
return n},i=function(e,t){for(var n=[],o=0;o<e.length;++o)-1===t.indexOf(e[o])&&n.push(e[o])
return n},r=function(e,t){var n=new Array(t),o=e.length,i=new Array(o)
if(t>o)throw new RangeError("getRandom: more elements taken than available")
for(;t--;){var r=Math.floor(Math.random()*o)
n[t]=e[r in i?i[r]:r],i[r]=--o}return n},a=function(s){return s.exec=function(e){return t(this,e),this},s.rand=function(e){void 0===e&&(e=1)
var t=this.length
return e>=t?s:a(0>=e?[]:r(this,e))},s.where=function(t){return"object"==typeof t?a(n(this,t)):"function"==typeof t?a(o(this,t)):(e.error("Invalid query: "+typeof t),a([]))},s.not=function(e){var t=this.where(e),n=i(this,t)
return a(n)},s.set=function(e){return e=e||{},this.exec(function(t){t.set(e)}),this},s.data=function(e){return this.exec(function(t){t.setData(e)})},s.color=function(e){return this.exec(function(t){t.setColor(e)})},s.glyph=function(e){return this.exec(function(t){t.setGlyph(e)})},s.glyphColor=function(e){return this.exec(function(t){t.setGlyphColor(e)})},s}
e.getAllTiles=function(e){for(var t=[],n=0,o=e.state.tiles.length;o>n;++n)t.push(e.state.tiles[n])
return a(t)},e.selector=function(t,n,o){var i=e.getAllTiles(t)
return void 0===n?i:"object"==typeof n||"function"==typeof n?i.where(n):"number"==typeof n&&"number"==typeof o?a([e.getTile(t,n,o)]):(e.error("Invalid tile selector: "+typeof n),i)}})},{}],9:[function(e,t,n){!function(e){this.Spielmatrix=e()}(function(){"use strict"
function e(t){if(!(this instanceof e))return new e(t)
this.options=t=t?e.copyObj(t):{},e.copyObj(o,t,!1),this.state={tiles:[],renderer:null,width:this.options.width,height:this.options.height,tileSize:this.options.tileSize,cursor:{x:-1,y:-1,onGrid:!1},time:e.getMS()}
var n=this
e.initializeModules(n)
for(var a in i)i.hasOwnProperty(a)&&i[a](this,t[a],r)
e.updateLoop(n)}function t(t,n){e.updateModules(t,n),t.options.update&&t.options.update(n)}function n(t,n,o,a){e.defaults[t]=n,o&&(i[t]=a?function(e,t,n){n!=r&&o(e,t,n)}:o)}e.modules=[],e.initializeModules=function(t){for(var n=0;n<e.modules.length;++n){var o=e.modules[n]
"function"==typeof o.initialize&&o.initialize(t)}},e.updateModules=function(t,n){for(var o=0;o<e.modules.length;++o){var i=e.modules[o]
"function"==typeof i.update&&i.update(t,n)}},e.prototype={constructor:e,color:function(t,n,o){e.setTileColor(this,t,n,o)},glyph:function(t,n,o){e.setTileGlyph(this,t,n,o)},glyphColor:function(t,n,o){e.setTileGlyphColor(this,t,n,o)},set:function(t,n,o){e.setTileProperties(this,t,n,o)},data:function(t,n,o){e.setTileData(this,t,n,o)},tile:function(t,n){return e.getTile(this,t,n)},randBetween:function(e,t){return Math.floor(Math.random()*(t+1-e))},log:function(t){e.log(t)},selector:function(){return e.selector.bind(this,this)},play:function(t){return e.audio.play(this,t)}},e.updateLoop=function(n){function o(){var i=e.getMS(),r=Math.max(1,i-n.state.time)
n.state.time=i,t(n,{time:r}),e.rendering.render(n),window.requestAnimationFrame(o)}window.requestAnimationFrame(o)}
var o=e.defaults={},i=e.optionHandlers={},r=e.Init={toString:function(){return"Spielmatrix.Init"}}
return n("width",10),n("height",10),n("defaultColor",3368601),n("tileSize",32),n("place",document.body),n("pixelPerfect",!0),n("resizeCanvas",!0),n("renderWidthMax",480),n("renderWidthMin",240),n("audioPath","./sounds/"),n("preloadAudio",null),e.version="1.0.1",e})},{}],10:[function(e,t,n){!function(e){e(Spielmatrix)}(function(e){"use strict"
var t=e.Tile=function(e,t,n,o,i,r,a){e.position.x=o*r,e.position.y=i*r,t.position.x=o*r,t.position.y=i*r,t.scale.x=r/8,t.scale.y=r/8,this.squareSprite=e,this.glyphSprite=t,this.glyphSheet=n,this.x=o,this.y=i,this.size=r,this.color=a,this.glyph=0,this.glyphColor=0,this.data=null,this.dirty=!0}
t.prototype.render=function(){this.dirty&&(this.dirty=!1,this.squareSprite.tint=this.color,this.glyphSprite.tint=this.glyphColor)},t.prototype.setColor=function(e){return this.dirty=!0,this.color=e,this},t.prototype.setGlyphColor=function(e){return this.dirty=!0,this.glyphColor=e,this},t.prototype.setGlyph=function(t){return"string"==typeof t&&(t=t.charCodeAt(0)),t>=0&&t<this.glyphSheet.length?(this.glyph=t,this.glyphSprite.texture=this.glyphSheet[t]):e.error("Glyph index "+t+" out of range."),this},t.prototype.setData=function(e){return this.data=e,this},t.prototype.set=function(e){return e=e||{},e.hasOwnProperty("data")&&this.setData(e.data),e.hasOwnProperty("color")&&this.setColor(e.color),e.hasOwnProperty("glyph")&&this.setGlyph(e.glyph),e.hasOwnProperty("glyphColor")&&this.setGlyphColor(e.glyphColor),this},e.getTile=function(t,n,o){var i=n+o*t.state.width
return 0>i||i>=t.state.tiles.length?(e.error(["Tile out of bounds:",n,o].join(" ")),null):t.state.tiles[i]},e.setTileColor=function(t,n,o,i){var r=e.getTile(t,n,o)
null!==r&&r.setColor(i)},e.setTileGlyph=function(t,n,o,i){var r=e.getTile(t,n,o)
null!==r&&r.setGlyph(i)},e.setTileGlyphColor=function(t,n,o,i){var r=e.getTile(t,n,o)
null!==r&&r.setGlyphColor(i)},e.setTileProperties=function(t,n,o,i){var r=e.getTile(t,n,o)
null!==r&&r.set(i)},e.setTileData=function(t,n,o,i){var r=e.getTile(t,n,o)
null!==r&&r.setData(i)}})},{}],11:[function(e,t,n){!function(e){e(Spielmatrix)}(function(e){"use strict"
function t(){}e.createObj=function(n,o){var i
return Object.create?i=Object.create(n):(t.prototype=n,i=new t),o&&e.copyObj(o,i),i},e.copyObj=function(e,t,n){t||(t={})
for(var o in e)!e.hasOwnProperty(o)||n===!1&&t.hasOwnProperty(o)||(t[o]=e[o])
return t},e.getMS=function(){return(new Date).getMilliseconds()},e.log=function(e){console.log(e)},e.error=function(e){console.error(e)}})},{}],12:[function(e,t,n){e("../lib/spielmatrix.js"),e("../lib/assets.js"),e("../lib/rendering.js"),e("../lib/tile.js"),e("../lib/mouse.js"),e("../lib/utilities.js"),e("../lib/keyboard.js"),e("../lib/selector.js"),e("../lib/audio.js"),window.kd=e("../lib/keydrown/keydrown.js"),window.HowlerBundle=e("../lib/howler/howler.core.min.js"),window.Howl=window.HowlerBundle.Howl},{"../lib/assets.js":1,"../lib/audio.js":2,"../lib/howler/howler.core.min.js":3,"../lib/keyboard.js":4,"../lib/keydrown/keydrown.js":5,"../lib/mouse.js":6,"../lib/rendering.js":7,"../lib/selector.js":8,"../lib/spielmatrix.js":9,"../lib/tile.js":10,"../lib/utilities.js":11}]},{},[12])
